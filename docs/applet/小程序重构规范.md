# 小程序重构规范

## 官方的一些规范

### 页面下拉刷新加载

- 在微信小程序内，微信提供标准的页面下拉刷新加载能力和样式，开发者无需自行开发。

### 启动页加载

- 启动页除品牌标志（Logo）展示外，页面上的其他所有元素如加载进度指示，均由微信统一提供且不能更改，无需开发者开发。
<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/4miniapp.loading.6910c359.png" />

### 模态加载

- 模态的加载样式将覆盖整个页面的，由于无法明确告知具体加载的位置或内容将可能引起用户的焦虑感，因此应谨慎使用。除了在某些全局性操作下不要使用模态的加载。
  
<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/4loading.bd5f542d.png" />

### 减少输入

- 由于手机键盘区域小且密集，输入困难的同时还易引起输入错误，因此在设计小程序页面时应尽量减少用户输入，利用现有接口或其他一些易于操作的选择控件来改善用户输入的体验。

- 例如下图中，在添加银行卡时，采用摄像头识别接口来帮助用户输入。除此之外微信团队还对外开放例如地理位置接口等多种微信小程序接口 ，充分利用这些接口将大大提高用户输入的效率和准确性，进而优化体验。
<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/7less-input.3448dc95.png" />
- 除了利用接口外，在不得不让用户进行手动输入时，应尽量让用户做选择而不是键盘输入。一方面，回忆易于记忆，让用户在有限的选项中做选择通常来说是容易于完全靠记忆输入；另一方面，仍然是考虑到手机键盘密集的单键输入极易造成输入错误。 例如图中，在用户搜索时提供搜索历史快捷选项将帮助用户快速进行搜索，而减少或避免不必要的键盘输入。

<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/7less-input2.33592ea4.png" />

## 小程序大屏适配指南

### 为什么要适配

- 为了保证小程序在不同尺寸下的体验流畅友好，进行适配
- 推荐格栅系统、配合相应策略实现动态布局

### 适配原则

- （1）视图信息展示完整可读
<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt5.faefacf6.png" />
- （2）视图尺寸切换交互流畅友好
<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt6.80b82a9a.png" />

PC适配小程序需注意：

- Navigation Bar与Tab Bar高度（若有），适配后高度保持不变。
- 为避免适配而产生的弹窗控件形变，弹窗控件可采用鼠标指针跟随的形式进行呈现。
- 悬浮工具栏可能会因视窗的位置的变动而出现在可视范围外，在PC端适配中，如果工具栏与特定区域相关，建议采用更稳定的形式去呈现。
- 在PC端，手指下拉进行页面刷新的操作方式并不友好。适配过程中，如果你的小程序页面需要刷新能力，你需要采用一种相对稳定展现形式去呈现。

### 常见布局方式

- （1）左右伸缩

布局特点：将页面元素水平拉伸至屏幕尺寸合适的区域。常用于元素/结构简单的页面，例如列表、表格等。

适配规则：页面显示高度固定，宽度不是固定值；当布局的显示大小发生变化时，元素的显示宽度随之改变。

<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt7.3f2dfd56.png" />

- （2）换行排列

布局特点：将页面元素根据布局宽度来选择由上下、左右排布。常用于信息架构层级较少的内容呈现型页面，例如内容详情页等。

适配规则：判断布局区域的横向宽度，是否能容纳若干元素，若能容纳就使用左右排布，容纳不了就使用上下排布。
<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt8.4fbacfd2.png" />

- （3）横向拓展

布局特点：将页面元素重复延伸至相对屏幕尺寸合适的区域。常用于模块结构固定，且模块内布局简单有序的页面，例如电商等。

适配规则：保持页面元素尺寸或间距其中之一不变的前提下，基于布局区域的横向宽度，在横向增加更多元素。

<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt9.5933894b.png" />

- （4）分页展现

布局特点：利用屏幕宽度优势，将相同属性的布局组件，横向并列排布。常用于信息架构层级较少的内容呈现型页面，例如歌单、应用列表等。

适配规则：可定义单个组件的宽度规则，随布局区域横向宽度的变化，自动计算可重复的元素个数。

<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt10.c6802730.png" />

- （5）分层展现

布局特点：将页面分为多栏，分区域展示各模块内容。分栏具有明显主从关系，从属部分依赖于主导部分存在。常用于层级结构明确，且分栏展示不影响信息获取的页面，例如工具类应用，左侧为母菜单，中间为子菜单，右侧为内容详情。

适配规则：设定每栏最小宽度，依据布局区域的横向宽度，判断能容纳层级数量，展现可呈现的栏数。

<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt11.3bd8a053.png" />

- （6）自由布局

布局特点：将页面分为多个功能模块，确定主模块后，从属模块围绕主模块布局。常用于页面内存在多个功能模块情况，其中有且只有1个主模块，例如内容详情页等。

适配规则：确定主模块显示最大值与固定位置，从属模块随布局区域横向宽度的变化，围绕主模块自动计算可呈现模式。

<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt12.ce6ae0ed.png" />

- （7）侧边栏

布局特点：页面中存在明显主从关系，主模块为导航模块，在大尺寸下主模块可使用侧边栏形式显示，使页面同时能快速浏览或操作主从模块。

适配规则：设定页面断点宽度，超过断点尺寸，主模块变化成页面侧边栏，从属模块依据布局区域的宽度自动计算可呈现信息量。

<img src="https://res.wx.qq.com/wxdoc/dist/assets/img/adapt13.2177971b.png" />

## 遇到的问题及解决方案
